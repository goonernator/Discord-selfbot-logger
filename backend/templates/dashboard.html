<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discord Logger Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <!-- Toast Notification Container -->
    <div class="toast-container" id="toastContainer"></div>
    
    <div class="app-layout" id="appLayout">
        <!-- Discord Layout Server Sidebar (only visible in Discord+ layout) -->
        <aside class="server-sidebar" id="serverSidebar">
            <div class="server-icon active" title="Current Account" onclick="switchView('dashboard')">
                <i class="fas fa-terminal"></i>
            </div>
            <div class="server-separator"></div>
            <div id="discordServerList">
                <!-- Account icons will be populated here -->
            </div>
            <div class="server-icon add-server" title="Add Account" onclick="openAddAccountModal()">
                <i class="fas fa-plus"></i>
            </div>
        </aside>

        <!-- Sidebar Navigation -->
        <aside class="sidebar-nav">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-terminal"></i>
                    <span>Logger</span>
                </div>
            </div>
            
            <nav class="nav-menu">
                <a href="#" class="nav-item active" data-view="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-view="events">
                    <i class="fas fa-list"></i>
                    <span>All Events</span>
                </a>
                <a href="#" class="nav-item" data-view="attachments">
                    <i class="fas fa-paperclip"></i>
                    <span>Attachments</span>
                </a>
                <a href="#" class="nav-item" data-view="accounts">
                    <i class="fas fa-users"></i>
                    <span>Accounts</span>
                </a>
                <a href="#" class="nav-item" data-view="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <div class="profile-section" onclick="openSettingsModal()">
                    <div class="profile-avatar">
                        <img id="profileAvatarImg" class="avatar-image" style="display: none;" alt="Profile Avatar">
                        <div id="profileAvatarFallback" class="avatar-fallback" style="display: flex;">
                            <i class="fas fa-user-circle"></i>
                        </div>
                    </div>
                    <div class="profile-info">
                        <div class="profile-name" id="currentAccountName">{{ current_account_name }}</div>
                        <div class="profile-status">
                            <i class="fas fa-circle status-dot"></i>
                            <span id="connectionStatusText">Online</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-area">
            <header class="top-bar">
                <div class="view-title">
                    <h1 id="currentViewTitle">Dashboard</h1>
                </div>
                <div class="top-bar-actions">
                    <button class="action-btn" onclick="clearInterface()" title="Clear Interface">
                    <i class="fas fa-trash"></i>
                </button>
                    <button class="action-btn" onclick="restartWebServer()" title="Restart Server">
                    <i class="fas fa-redo"></i>
                </button>
                    <div class="connection-indicator connected" id="connectionStatus">
                        <i class="fas fa-wifi"></i>
                        <span>Connected</span>
            </div>
        </div>
            </header>

            <div class="content-container" id="mainContent">
                <!-- Dashboard View (Summary) -->
                <div class="view-content active" id="dashboard-view">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon messages"><i class="fas fa-comments"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="messagesCount">-</div>
                                <div class="stat-label">Messages</div>
            </div>
            </div>
                        <div class="stat-card">
                            <div class="stat-icon mentions"><i class="fas fa-at"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="mentionsCount">-</div>
                                <div class="stat-label">Mentions</div>
            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon deletions"><i class="fas fa-trash"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="deletionsCount">-</div>
                                <div class="stat-label">Deletions</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon uptime"><i class="fas fa-clock"></i></div>
                            <div class="stat-info">
                                <div class="stat-value" id="uptimeValue">-</div>
                                <div class="stat-label">Uptime</div>
                            </div>
                        </div>
            </div>

                    <div class="dashboard-grid">
                        <div class="activity-panel card">
                            <div class="card-header">
                                <h3>Activity Over Time</h3>
                            </div>
                            <div class="chart-container">
                                <canvas id="activityChart"></canvas>
            </div>
        </div>

                        <div class="recent-events-panel card">
                            <div class="card-header">
                                <h3>Recent Activity</h3>
                                <button class="btn-text" onclick="switchView('events')">See All</button>
                        </div>
                            <div class="events-list mini" id="recentEventsList">
                                <div class="loading">Loading...</div>
                    </div>
                        </div>
                        
                        <div class="system-status-panel card">
                            <div class="card-header">
                                <h3>System Health</h3>
                            </div>
                            <div class="status-list">
                                <div class="status-item">
                                    <span class="status-label">Webhook Status</span>
                                    <div class="rate-limit-indicator rate-limit-ok" id="webhookRateIndicator"></div>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">API Status</span>
                                    <div class="rate-limit-indicator rate-limit-ok" id="apiRateIndicator"></div>
                                </div>
                                <div class="status-item">
                                    <span class="status-label">Download Status</span>
                                    <div class="rate-limit-indicator rate-limit-ok" id="downloadRateIndicator"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Events View -->
                <div class="view-content" id="events-view">
                    <div class="events-section card">
                        <div class="section-header">
                    <div class="filter-tabs">
                        <button class="filter-tab active" data-filter="all">All</button>
                        <button class="filter-tab" data-filter="message">Messages</button>
                        <button class="filter-tab" data-filter="mention">Mentions</button>
                        <button class="filter-tab" data-filter="deletion">Deletions</button>
                        <button class="filter-tab" data-filter="friend">Relationships</button>
                    </div>
                </div>
                <div class="events-list" id="eventsList">
                            <div class="loading">Loading events...</div>
                    </div>
                </div>
            </div>

                <!-- Attachments View -->
                <div class="view-content" id="attachments-view">
                    <div class="events-section card">
                        <div class="section-header">
                            <h2>Recent Attachments</h2>
                        </div>
                        <div class="events-list" id="attachmentsList">
                            <div class="loading">Loading attachments...</div>
                        </div>
                        </div>
                    </div>
                    
                <!-- Accounts View -->
                <div class="view-content" id="accounts-view">
                    <div class="card">
                        <div class="section-header">
                            <h2>Account Management</h2>
                            <button class="btn btn-primary" onclick="openAddAccountModal()">
                                <i class="fas fa-plus"></i> Add Account
                            </button>
                        </div>
                        <div class="settings-content">
                        <div class="setting-item">
                            <div>
                                    <div class="setting-label">Active Account</div>
                                    <div class="setting-description" id="viewActiveAccountInfo">Loading...</div>
                            </div>
                                <button class="btn btn-secondary" onclick="refreshAccounts()">Refresh</button>
                        </div>
                        
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Switch Account</div>
                                    <div class="setting-description">Select a different account to use</div>
                                </div>
                                <select id="viewAccountSelector" onchange="switchAccountView()" class="account-select">
                                    <option value="">Loading accounts...</option>
                                </select>
                            </div>
                            
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Danger Zone</div>
                                    <div class="setting-description">Remove the currently selected account</div>
                            </div>
                                <button class="btn btn-danger" onclick="removeCurrentAccountView()" id="viewRemoveAccountBtn">Remove Account</button>
                        </div>
                    </div>
                </div>
            </div>

                <!-- Settings View -->
                <div class="view-content" id="settings-view">
                    <div class="card">
                        <div class="section-header">
                            <h2>General Settings</h2>
        </div>
                        <div class="settings-content">
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Webhook Notifications</div>
                                    <div class="setting-description">Enable or disable Discord webhook notifications</div>
                                </div>
                                <div class="toggle-switch" id="viewWebhookToggle" onclick="toggleWebhook()">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                            
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Logging Level</div>
                                    <div class="setting-description">Set the application logging verbosity level</div>
                                </div>
                                <select class="setting-dropdown" id="viewLogLevelSelect" onchange="changeLogLevelView()">
                                    <option value="DEBUG">DEBUG - Detailed diagnostic information</option>
                                    <option value="INFO">INFO - General information messages</option>
                                    <option value="WARNING">WARNING - Warning messages only</option>
                                    <option value="ERROR">ERROR - Error messages only</option>
                                    <option value="CRITICAL">CRITICAL - Critical errors only</option>
                                    <option value="NONE">NONE - No logging output</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <div class="section-header">
                            <h2>Layout & Style</h2>
                        </div>
                        <div class="settings-content">
                            <div class="setting-item">
                                <div>
                                    <div class="setting-label">Interface Layout</div>
                                    <div class="setting-description">Choose how the dashboard is structured</div>
                                </div>
                                <select class="setting-dropdown" id="layoutSelector" onchange="setLayout(this.value)">
                                    <option value="modern">Modern (Sleek & Clean)</option>
                                    <option value="legacy">Legacy (Classic Side-Nav)</option>
                                    <option value="discord">Discord+ (Discord Clone)</option>
                                </select>
                            </div>
                        </div>

                        <div class="theme-grid" style="margin-top: 20px;">
                            <div class="setting-label" style="margin-bottom: 12px; font-weight: 600;">Theme</div>
                            <div class="theme-selector">
                                <div class="theme-option" data-theme="default" onclick="setTheme('default')">
                                    <div class="theme-preview" style="background: #ffffff; border: 1px solid #ddd;">
                                        <div class="theme-color" style="background: #5865f2;"></div>
                                        <div class="theme-color" style="background: #667eea;"></div>
                                    </div>
                                    <span class="theme-name">Light</span>
                                </div>
                                
                                <div class="theme-option" data-theme="dark" onclick="setTheme('dark')">
                                    <div class="theme-preview" style="background: #23272a;">
                                        <div class="theme-color" style="background: #7289da;"></div>
                                        <div class="theme-color" style="background: #2c2f33;"></div>
                                    </div>
                                    <span class="theme-name">Dark</span>
                                </div>
                                
                                <div class="theme-option" data-theme="neon" onclick="setTheme('neon')">
                                    <div class="theme-preview" style="background: #000000; box-shadow: 0 0 5px #0ff;">
                                        <div class="theme-color" style="background: #0ff;"></div>
                                        <div class="theme-color" style="background: #f0f;"></div>
                                    </div>
                                    <span class="theme-name">Neon</span>
                                </div>
                                
                                <div class="theme-option" data-theme="glitch" onclick="setTheme('glitch')">
                                    <div class="theme-preview" style="background: #1a1a1a; position: relative; overflow: hidden;">
                                        <div style="position: absolute; width: 100%; height: 2px; background: red; top: 20%; opacity: 0.5;"></div>
                                        <div class="theme-color" style="background: #333;"></div>
                                        <div class="theme-color" style="background: #555;"></div>
                                    </div>
                                    <span class="theme-name">Glitch</span>
                                </div>
                                
                                <div class="theme-option" data-theme="8bit" onclick="setTheme('8bit')">
                                    <div class="theme-preview" style="background: #008; border: 2px solid #fff;">
                                        <div class="theme-color" style="background: #f00;"></div>
                                        <div class="theme-color" style="background: #0f0;"></div>
                                    </div>
                                    <span class="theme-name">8-bit</span>
                                </div>
                                
                                <div class="theme-option" data-theme="glass" onclick="setTheme('glass')">
                                    <div class="theme-preview" style="background: rgba(255,255,255,0.2); backdrop-filter: blur(5px); border: 1px solid rgba(255,255,255,0.3);">
                                        <div class="theme-color" style="background: rgba(255,255,255,0.5);"></div>
                                        <div class="theme-color" style="background: rgba(88,101,242,0.4);"></div>
                                    </div>
                                    <span class="theme-name">Frosted</span>
                                </div>

                                <div class="theme-option" data-theme="kintsugi" onclick="setTheme('kintsugi')">
                                    <div class="theme-preview" style="background: radial-gradient(circle at 30% 30%, #1b1b1d 0%, #0b0b0e 70%); border: 1px solid rgba(255, 215, 128, 0.55);">
                                        <div class="theme-color" style="background: #ffd780;"></div>
                                        <div class="theme-color" style="background: #6ee7ff;"></div>
                                    </div>
                                    <span class="theme-name">Kintsugi Noir by ChatGPT</span>
                                </div>

                                <div class="theme-option" data-theme="voidprism" onclick="setTheme('voidprism')">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #070814 0%, #0a0f2a 45%, #120a2b 100%); border: 1px solid rgba(168, 85, 247, 0.6);">
                                        <div class="theme-color" style="background: #a855f7;"></div>
                                        <div class="theme-color" style="background: #22d3ee;"></div>
                                    </div>
                                    <span class="theme-name">Void Prism by ChatGPT</span>
                                </div>

                                <div class="theme-option" data-theme="signalwave" onclick="setTheme('signalwave')">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #03150d 0%, #07221a 100%); border: 1px solid rgba(34, 197, 94, 0.65);">
                                        <div class="theme-color" style="background: #22c55e;"></div>
                                        <div class="theme-color" style="background: #a3ffb2;"></div>
                                    </div>
                                    <span class="theme-name">Signalwave by ChatGPT</span>
                                </div>

                                <div class="theme-option" data-theme="dunesunset" onclick="setTheme('dunesunset')">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #1a0b2e 0%, #7c2d12 55%, #f59e0b 100%); border: 1px solid rgba(245, 158, 11, 0.6);">
                                        <div class="theme-color" style="background: #f59e0b;"></div>
                                        <div class="theme-color" style="background: #fb7185;"></div>
                                    </div>
                                    <span class="theme-name">Dune Sunset by ChatGPT</span>
                                </div>

                                <div class="theme-option" data-theme="obsidianmint" onclick="setTheme('obsidianmint')">
                                    <div class="theme-preview" style="background: radial-gradient(circle at 18% 12%, rgba(52, 211, 153, 0.22) 0%, transparent 55%), linear-gradient(180deg, #070b10 0%, #05070b 100%); border: 1px solid rgba(52, 211, 153, 0.35);">
                                      <div class="theme-color" style="background: #34d399;"></div>
                                      <div class="theme-color" style="background: #0a0e14;"></div>
                                    </div>
                                    <span class="theme-name">Obsidian Mint by ChatGPT 5.2</span>
                                  </div>
                                  
                                  <div class="theme-option" data-theme="arcticslate" onclick="setTheme('arcticslate')">
                                    <div class="theme-preview" style="background: radial-gradient(circle at 30% 12%, rgba(96, 165, 250, 0.24) 0%, transparent 55%), linear-gradient(180deg, #0b1220 0%, #070c16 100%); border: 1px solid rgba(147, 197, 253, 0.30);">
                                      <div class="theme-color" style="background: #60a5fa;"></div>
                                      <div class="theme-color" style="background: #0b1220;"></div>
                                    </div>
                                    <span class="theme-name">Arctic Slate by ChatGPT 5.2</span>
                                  </div>
                                  
                                  <div class="theme-option" data-theme="emberterminal" onclick="setTheme('emberterminal')">
                                    <div class="theme-preview" style="background: radial-gradient(circle at 70% 10%, rgba(251, 146, 60, 0.26) 0%, transparent 55%), linear-gradient(180deg, #0c0604 0%, #070403 100%); border: 1px solid rgba(251, 146, 60, 0.35);">
                                      <div class="theme-color" style="background: #fb923c;"></div>
                                      <div class="theme-color" style="background: #140805;"></div>
                                    </div>
                                    <span class="theme-name">Ember Terminal by ChatGPT 5.2</span>
                                  </div>
                                  
                                  <div class="theme-option" data-theme="rosequartz" onclick="setTheme('rosequartz')">
                                    <div class="theme-preview" style="background: radial-gradient(circle at 20% 10%, rgba(251, 113, 133, 0.24) 0%, transparent 55%), linear-gradient(135deg, #140a14 0%, #1c0b1a 55%, #0b0a12 100%); border: 1px solid rgba(253, 164, 175, 0.28);">
                                      <div class="theme-color" style="background: #fb7185;"></div>
                                      <div class="theme-color" style="background: #1c0b1a;"></div>
                                    </div>
                                    <span class="theme-name">Rose Quartz by ChatGPT 5.2</span>
                                  </div>
                                <!-- Ocean Seas by DeepSeek -->
                                <div class="theme-option" data-theme="oceanseas" onclick="setTheme('oceanseas')">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #03045e 0%, #0077b6 50%, #00b4d8 100%); position: relative; overflow: hidden;">
                                        <div style="position: absolute; width: 100%; height: 100%; background: linear-gradient(transparent 0%, rgba(144, 224, 239, 0.2) 100%);"></div>
                                        <div class="theme-color" style="background: #00b4d8;"></div>
                                        <div class="theme-color" style="background: #90e0ef;"></div>
                                        <div class="theme-color" style="background: #03045e;"></div>
                                    </div>
                                    <span class="theme-name">Ocean Seas by DeepSeek</span>
                                </div>
                                
                                <!-- Nebula Dream by DeepSeek -->
                                <div class="theme-option" data-theme="nebuladream" onclick="setTheme('nebuladream')">
                                    <div class="theme-preview" style="background: radial-gradient(circle at 50% 0%, #10002b 0%, #240046 40%, #3c096c 100%); position: relative; overflow: hidden;">
                                        <div style="position: absolute; width: 100%; height: 100%; background: radial-gradient(circle at 50% 50%, rgba(199, 125, 255, 0.3) 0%, transparent 70%);"></div>
                                        <div class="theme-color" style="background: #9d4edd;"></div>
                                        <div class="theme-color" style="background: #c77dff;"></div>
                                        <div class="theme-color" style="background: #e0aaff;"></div>
                                    </div>
                                    <span class="theme-name">Nebula Dream by DeepSeek</span>
                                </div>
                                
                                <!-- Quantum Circuit by DeepSeek -->
                                <div class="theme-option" data-theme="quantumcircuit" onclick="setTheme('quantumcircuit')">
                                    <div class="theme-preview" style="background: #000814; position: relative; overflow: hidden;">
                                        <div style="position: absolute; width: 100%; height: 100%; background-image: 
                                            linear-gradient(rgba(0, 255, 136, 0.1) 1px, transparent 1px),
                                            linear-gradient(90deg, rgba(0, 255, 136, 0.1) 1px, transparent 1px);
                                            background-size: 20px 20px;"></div>
                                        <div class="theme-color" style="background: #00ff88;"></div>
                                        <div class="theme-color" style="background: #00ccaa;"></div>
                                        <div class="theme-color" style="background: #000814;"></div>
                                    </div>
                                    <span class="theme-name">Quantum Circuit by DeepSeek</span>
                                </div>
                                
                                <!-- Aurora Mirage by DeepSeek -->
                                <div class="theme-option" data-theme="auroramirage" onclick="setTheme('auroramirage')">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #0f0c29 0%, #302b63 33%, #24243e 66%, #1a1a2e 100%); position: relative; overflow: hidden;">
                                        <div style="position: absolute; width: 100%; height: 100%; background: linear-gradient(
                                            45deg,
                                            rgba(255, 107, 157, 0.2) 0%,
                                            rgba(155, 107, 255, 0.2) 33%,
                                            rgba(107, 205, 255, 0.2) 66%,
                                            rgba(255, 205, 107, 0.2) 100%
                                        );"></div>
                                        <div class="theme-color" style="background: #ff6b9d;"></div>
                                        <div class="theme-color" style="background: #ff99c8;"></div>
                                        <div class="theme-color" style="background: #1a1a2e;"></div>
                                    </div>
                                    <span class="theme-name">Aurora Mirage by DeepSeek</span>
                                </div>  
                                <!-- Cosmic Supernova by Grok -->
                                <div class="theme-option" data-theme="cosmicsupernova" onclick="setTheme('cosmicsupernova')">
                                    <div class="theme-preview" style="background: radial-gradient(circle at 50% 50%, #0d0015 0%, #1a0033 50%, #000000 100%); position: relative; overflow: hidden;">
                                        <div style="position: absolute; inset: 0; background: radial-gradient(circle, rgba(255, 46, 99, 0.3) 0%, transparent 50%); animation: supernova-pulse 8s ease-in-out infinite; opacity: 0.6;"></div>
                                        <div class="theme-color" style="background: #ff2e63;"></div>
                                        <div class="theme-color" style="background: #ff6b9d;"></div>
                                        <div class="theme-color" style="background: #ff9ecb;"></div>
                                    </div>
                                    <span class="theme-name">Cosmic Supernova by Grok</span>
                                </div>  
                                <!-- Electric Void by Grok -->
                                <div class="theme-option" data-theme="electricvoid" onclick="setTheme('electricvoid')">
                                    <div class="theme-preview" style="background: #000000; position: relative; overflow: hidden; box-shadow: 0 0 8px #00ffff;">
                                        <div style="position: absolute; inset: 0; background: linear-gradient(90deg, transparent 49%, rgba(0, 255, 255, 0.2) 50%, transparent 51%), linear-gradient(transparent 49%, rgba(0, 255, 255, 0.2) 50%, transparent 51%); background-size: 30px 30px; animation: electric-grid 6s linear infinite;"></div>
                                        <div class="theme-color" style="background: #00ffff;"></div>
                                        <div class="theme-color" style="background: #00bfff;"></div>
                                    </div>
                                    <span class="theme-name">Electric Void by Grok</span>
                                </div>  
                                <!-- Galactic Frost by Grok -->
                                <div class="theme-option" data-theme="galacticfrost" onclick="setTheme('galacticfrost')">
                                    <div class="theme-preview" style="background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #020617 100%); position: relative; overflow: hidden;">
                                        <div style="position: absolute; inset: 0; background: radial-gradient(circle at 30% 50%, rgba(165, 243, 252, 0.25) 0%, transparent 50%); animation: frost-drift 20s ease-in-out infinite;"></div>
                                        <div class="theme-color" style="background: #a5f3fc;"></div>
                                        <div class="theme-color" style="background: #67e8f9;"></div>
                                        <div class="theme-color" style="background: #0f172a;"></div>
                                    </div>
                                    <span class="theme-name">Galactic Frost by Grok</span>
                                </div>  
                                <!-- Plasma Storm by Grok -->
                                <div class="theme-option" data-theme="plasmastorm" onclick="setTheme('plasmastorm')">
                                    <div class="theme-preview" style="background: #120e1f; position: relative; overflow: hidden;">
                                        <div style="position: absolute; inset: -20%; background: conic-gradient(from 0deg at 50% 50%, #d946ef, #f72585, #7209b7, #d946ef); animation: plasma-spin 15s linear infinite; filter: blur(20px); opacity: 0.4;"></div>
                                        <div class="theme-color" style="background: #d946ef;"></div>
                                        <div class="theme-color" style="background: #f72585;"></div>
                                        <div class="theme-color" style="background: #f0abfc;"></div>
                                    </div>
                                    <span class="theme-name">Plasma Storm by Grok</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 20px;">
                        <div class="section-header">
                            <h2>Duplicate Messages</h2>
                            <button class="btn btn-danger btn-sm" onclick="clearAllDuplicates()">Clear All</button>
                        </div>
                        <div id="viewDuplicatesList" class="duplicates-list">
                            <div class="loading">Loading duplicates...</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="connection-status connected" id="connectionStatus">
        <i class="fas fa-wifi"></i> Connected
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Settings</h2>
                <button class="close-btn" onclick="closeSettingsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Settings Tabs Navigation -->
                <div class="settings-tabs">
                    <button class="tab-button active" onclick="switchSettingsTab('accounts')" data-tab="accounts">
                        <i class="fas fa-users"></i>
                        <span>Accounts</span>
                    </button>
                    <button class="tab-button" onclick="switchSettingsTab('general')" data-tab="general">
                        <i class="fas fa-cog"></i>
                        <span>General</span>
                    </button>
                    <button class="tab-button" onclick="switchSettingsTab('themes')" data-tab="themes">
                        <i class="fas fa-palette"></i>
                        <span>Themes</span>
                    </button>
                    <button class="tab-button" onclick="switchSettingsTab('duplicates')" data-tab="duplicates">
                        <i class="fas fa-copy"></i>
                        <span>Duplicates</span>
                    </button>
                </div>
                
                <!-- Settings Tab Content -->
                <div class="settings-content">
                    <!-- Account Management Tab -->
                    <div class="tab-content active" id="accounts-tab">
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Active Account</div>
                                <div class="setting-description" id="activeAccountInfo">Loading...</div>
                            </div>
                            <button class="btn btn-secondary" onclick="refreshAccounts()">Refresh</button>
                        </div>
                        
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Switch Account</div>
                                <div class="setting-description">Select a different account to use</div>
                            </div>
                            <select id="accountSelector" onchange="switchAccount()" class="account-select">
                                <option value="">Loading accounts...</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Manage Accounts</div>
                                <div class="setting-description">Add, edit, or remove accounts</div>
                            </div>
                            <div class="account-buttons">
                                <button class="btn btn-primary" onclick="openAddAccountModal()">Add Account</button>
                                <button class="btn btn-danger" onclick="removeCurrentAccount()" id="removeAccountBtn">Remove Current</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- General Settings Tab -->
                    <div class="tab-content" id="general-tab">
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Webhook Notifications</div>
                                <div class="setting-description">Enable or disable Discord webhook notifications</div>
                            </div>
                            <div class="toggle-switch" id="webhookToggle" onclick="toggleWebhook()">
                                <div class="toggle-slider"></div>
                            </div>
                        </div>
                        
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Logging Level</div>
                                <div class="setting-description">Set the application logging verbosity level</div>
                            </div>
                            <select class="setting-dropdown" id="logLevelSelect" onchange="changeLogLevel()">
                                <option value="DEBUG">DEBUG - Detailed diagnostic information</option>
                                <option value="INFO">INFO - General information messages</option>
                                <option value="WARNING">WARNING - Warning messages only</option>
                                <option value="ERROR">ERROR - Error messages only</option>
                                <option value="CRITICAL">CRITICAL - Critical errors only</option>
                                <option value="NONE">NONE - No logging output</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Theme Settings Tab -->
                    <div class="tab-content" id="themes-tab">
                        <div class="setting-item">
                            <div>
                                <div class="setting-label">Theme</div>
                                <div class="setting-description">Choose your preferred color theme</div>
                            </div>
                            <div class="theme-selector">
                                <div class="theme-option" data-theme="default" onclick="setTheme('default')">
                                    <div class="theme-preview">
                                        <div class="theme-color" style="background: #5865f2;"></div>
                                        <div class="theme-color" style="background: #667eea;"></div>
                                        <div class="theme-color" style="background: #764ba2;"></div>
                                    </div>
                                    <span class="theme-name">Default</span>
                                </div>
                                
                                <div class="theme-option" data-theme="dark" onclick="setTheme('dark')">
                                    <div class="theme-preview">
                                        <div class="theme-color" style="background: #7289da;"></div>
                                        <div class="theme-color" style="background: #2c2f33;"></div>
                                        <div class="theme-color" style="background: #23272a;"></div>
                                    </div>
                                    <span class="theme-name">Dark</span>
                                </div>
                                
                                <div class="theme-option" data-theme="ocean" onclick="setTheme('ocean')">
                                    <div class="theme-preview">
                                        <div class="theme-color" style="background: #0077be;"></div>
                                        <div class="theme-color" style="background: #006994;"></div>
                                        <div class="theme-color" style="background: #004d6b;"></div>
                                    </div>
                                    <span class="theme-name">Ocean</span>
                                </div>
                                
                                <div class="theme-option" data-theme="forest" onclick="setTheme('forest')">
                                    <div class="theme-preview">
                                        <div class="theme-color" style="background: #28a745;"></div>
                                        <div class="theme-color" style="background: #2d5016;"></div>
                                        <div class="theme-color" style="background: #1a2e0a;"></div>
                                    </div>
                                    <span class="theme-name">Forest</span>
                                </div>
                                
                                <div class="theme-option" data-theme="sunset" onclick="setTheme('sunset')">
                                    <div class="theme-preview">
                                        <div class="theme-color" style="background: #ff6b35;"></div>
                                        <div class="theme-color" style="background: #ff9a56;"></div>
                                        <div class="theme-color" style="background: #ff6b35;"></div>
                                    </div>
                                    <span class="theme-name">Sunset</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Account Modal -->
    <div id="addAccountModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add New Account</h2>
                <button class="close-btn" onclick="closeAddAccountModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addAccountForm" onsubmit="addAccount(event)">
                    <div class="form-group">
                        <label for="accountName">Account Name</label>
                        <input type="text" id="accountName" name="accountName" required placeholder="e.g., Main Account, Alt Account">
                    </div>
                    
                    <div class="form-group">
                        <label for="discordToken">Discord Token</label>
                        <input type="password" id="discordToken" name="discordToken" required placeholder="Your Discord user token">
                        <div class="form-help">Your Discord user token (keep this secure!)</div>
                    </div>
                    
                    <div class="form-group">
                        <label for="webhookFriend">Friend Webhook URL</label>
                        <input type="url" id="webhookFriend" name="webhookFriend" required placeholder="https://discord.com/api/webhooks/...">
                    </div>
                    
                    <div class="form-group">
                        <label for="webhookMessage">Message Webhook URL</label>
                        <input type="url" id="webhookMessage" name="webhookMessage" required placeholder="https://discord.com/api/webhooks/...">
                    </div>
                    
                    <div class="form-group">
                        <label for="webhookCommand">Command Webhook URL</label>
                        <input type="url" id="webhookCommand" name="webhookCommand" required placeholder="https://discord.com/api/webhooks/...">
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeAddAccountModal()">Cancel</button>
                        <button type="submit" class="btn btn-primary">Add Account</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    
    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <button class="context-menu-item" id="tagChannelBtn">
            <i class="fas fa-tag"></i>
            <span>Tag as Group Chat</span>
        </button>
        <button class="context-menu-item" id="untagChannelBtn" style="display: none;">
            <i class="fas fa-tag"></i>
            <span>Remove Group Tag</span>
        </button>
        <div class="context-menu-separator"></div>
        <button class="context-menu-item" id="favoriteUserBtn">
            <i class="fas fa-star"></i>
            <span>Favorite User</span>
        </button>
        <button class="context-menu-item" id="unfavoriteUserBtn" style="display: none;">
            <i class="fas fa-star"></i>
            <span>Remove from Favorites</span>
        </button>
        <div class="context-menu-separator"></div>
        <button class="context-menu-item" id="autoDownloadBtn">
            <i class="fas fa-download"></i>
            <span>Auto-download Attachments</span>
        </button>
        <button class="context-menu-item" id="disableAutoDownloadBtn" style="display: none;">
            <i class="fas fa-download"></i>
            <span>Disable Auto-download</span>
        </button>
    </div>

</body>
</html>